<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="A community-run provider-neutral international public transport routing service." /><meta name="author" content="Transitous contributors" /><link rel="canonical" href="https://routing.spline.de/" />
      <link rel="shortcut icon" href="img/favicon.ico" />
    <title>Transitous</title>
    <link rel="stylesheet" href="css/theme.css" />
    <link rel="stylesheet" href="css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Home";
        var mkdocs_page_input_path = "index.md";
        var mkdocs_page_url = "/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/rust.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/python.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="." class="icon icon-home"> Transitous
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href=".">Home</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#goal">Goal</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#contact">Contact</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#adding-a-region">Adding a region</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#running-a-transitous-instance-locally">Running a transitous instance locally</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="licenses/">Feed-Licenses</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href=".">Transitous</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">Home</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/public-transport/transitous/mkdocs-site/edit/master/docs/index.md">Edit on public-transport/transitous</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <!--
SPDX-FileCopyrightText: None
SPDX-License-Identifier: CC0-1.0
-->

<h1 id="transitous">Transitous</h1>
<p>Free and open public transport routing.</p>
<h2 id="goal">Goal</h2>
<p>A community-run provider-neutral international public transport routing service.</p>
<p>Using openly available GTFS/GTFS-RT/etc. feeds and FOSS routing engine we want to operate a
routing service that:</p>
<ul>
<li>focuses on the interest of the user rather than the public transport operators</li>
<li>is free to use</li>
<li>values user privacy</li>
<li>does not stop at borders</li>
<li>aims at crowd-sourced maintenance of data feeds in the spirit of FOSS</li>
</ul>
<h2 id="contact">Contact</h2>
<ul>
<li>Matrix channel: <a href="https://matrix.to/#/#opentransport:matrix.org">#opentransport:matrix.org</a> (for now)</li>
</ul>
<h2 id="adding-a-region">Adding a region</h2>
<p>Transitous data sources are divided by region, so they can be continuously tested and verified by locals.</p>
<p>A region file in the <a href="feeds">feeds</a> directory has a <code>maintainers</code> attribute, which contains a list of people responsible for keeping the feeds for the region up to date.</p>
<pre><code class="language-json">{
    &quot;maintainers&quot;: [ ... ],
    &quot;sources&quot;: [ ... ]
}
</code></pre>
<p>A person is represented like this:</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;&lt; name of the maintainer &gt;&quot;,
    &quot;github&quot;: &quot;&lt; github username of the maintainer &gt;&quot;
}
</code></pre>
<p>The main attribute of a region is <code>sources</code>. It contains a list of feeds that should be fetched.</p>
<p>Each source can either be of <code>type</code> "transitland-atlas" or "http".
A transitland-atlas source is a feed from <a href="https://www.transit.land/feeds">Transitland</a>, identified by its Onestop ID.</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;&lt;name to be used for the output filename, should not contain spaces&gt;&quot;,
    &quot;type&quot;: &quot;transitland-atlas&quot;,
    &quot;transitland-atlas-id&quot;: &quot;&lt;onestop id&gt;&quot;
}
</code></pre>
<p>If the feed is not known in Transitland, a http source can be used instead.</p>
<pre><code class="language-json">{
    &quot;name&quot;: &quot;&lt;name to be used for the output filename&gt;&quot;,
    &quot;type&quot;: &quot;http&quot;,
    &quot;url&quot;: &quot;https://&lt;url of GTFS file&gt;&quot;,
    &quot;license&quot;: {
        &quot;spdx-identifier&quot;: &quot;&lt;license identifier from https://spdx.org/licenses/ if known&gt;&quot;,
        &quot;url&quot;: &quot;&lt; url as source for the license if available &gt;&quot;
    }
}
</code></pre>
<p>In both cases, the name needs to be unique in the file, except for if it is an GTFS-RT feed. These are realtime feeds that contain updates for a GTFS feed.
In order to know which one to apply the updates to, the names must match.</p>
<p>If the feed contains errors, you can try to add the <code>"fix": true</code> attribute, to try to automatically correct errors.</p>
<p>Once you create a pull request, fetching your feed will automatically be tested.</p>
<p>You can also test it locally, by running <code>./src/fetch.py feeds/&lt;region&gt;.json</code>.</p>
<p>For that you need to have <a href="https://github.com/patrickbr/gtfstidy">gtfstidy</a> installed.
You can also use the container described below.</p>
<h2 id="running-a-transitous-instance-locally">Running a transitous instance locally</h2>
<p>Running a local instance of the transitous setup can be useful for debugging.
The easiest way is to use the same container image that we use for fetching and importing the data on the CI.</p>
<p>First, ensure that you have the Git submodules:</p>
<pre><code class="language-bash">git submodule update --remote --checkout --init
</code></pre>
<p>Proceed by building the container:</p>
<pre><code class="language-bash">podman build ci/container/ -t transitous -f ci/container/Containerfile
</code></pre>
<p>Enter the container:</p>
<pre><code class="language-bash">podman run -it -p 8080:8080 -v $PWD:/transitous:Z --userns=keep-id -w /transitous transitous
</code></pre>
<p>Now inside the container, you can download and post-process all the feeds. This may take a while.</p>
<pre><code class="language-bash">./ci/fetch-feeds.py timer
</code></pre>
<p>The <code>out/</code> directory should now contain a number of zip files.</p>
<p>In addition to those, you also need a background map. Importing all of europe would take too long,
so for now just a smaller region.
You can find working map pbf downloads at <a href="https://download.geofabrik.de/">Geofabrik</a>.
You can click on the region names to find downloads for smaller subregions.</p>
<p>Then download the chosen region:</p>
<pre><code class="language-bash">wget https://download.geofabrik.de/europe/germany/berlin-latest.osm.pbf -P out
</code></pre>
<p>In order to start motis, we need a config file listing all the feeds we want to use.
You can generate one using our script:</p>
<pre><code class="language-bash">./src/generate-motis-config.py full
</code></pre>
<p>The generated config file still needs a small adjustment.
Edit the line in <code>out/config.ini</code> that starts with <code>paths=osm</code> to point to your map.</p>
<p>You can then go to the <code>out</code> directory, and start motis:</p>
<pre><code class="language-bash">cd out
motis -c config.ini --server.host 0.0.0.0 --server.static_path /opt/motis/web
</code></pre>
<p>The first start will take a while, as it imports all the maps and feeds.
Once it's done, the motis web interface should be reachable on <a href="http://localhost:8080">localhost:8080</a>.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="licenses/" class="btn btn-neutral float-right" title="Feed-Licenses">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
      <p>Copyright &copy; 2024 Transitous contributors</p>
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
      <span><a href="licenses/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="js/jquery-3.6.0.min.js"></script>
    <script>var base_url = ".";</script>
    <script src="js/theme_extra.js"></script>
    <script src="js/theme.js"></script>
      <script src="search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>

<!--
MkDocs version : 1.5.3
Build Date UTC : 2024-03-16 02:00:16.747229+00:00
-->
